# Merge Review Agent

Automated GitHub agent for managing branch consolidation into merge-review staging branch.

## Purpose
- Auto-creates PRs for all branches → merge-review
- Enables auto-merge where possible
- Runs on 10-minute schedule via cron
- Provides comprehensive logging and error handling

## Setup Instructions

1. **Install dependencies:**
   ```bash
   pkg install -y nodejs git openssh cronie
   npm install
   ```

2. **Configure environment:**
   ```bash
   cp .env.example .env
   # Edit .env with your GitHub token and repo details
   ```

3. **Build and test:**
   ```bash
   npx tsc
   node dist/merge-review-agent.js
   ```

4. **Schedule with cron:**
   ```bash
   crond
   (crontab -l 2>/dev/null; echo "*/10 * * * * cd $(pwd) && node dist/merge-review-agent.js >> agent.log 2>&1") | crontab -
   ```

## Features
- **Branch Discovery**: Automatically finds all branches except main/merge-review
- **PR Creation**: Creates staging PRs with descriptive titles and bodies
- **Auto-merge**: Enables GitHub auto-merge where branch protection allows
- **Error Handling**: Graceful handling of duplicate PRs and API errors
- **Logging**: Comprehensive logs for monitoring and debugging

## Monitoring
```bash
# Watch live logs
tail -f agent.log

# Check cron schedule
crontab -l

# Manual execution
node dist/merge-review-agent.js
```

## Agent Capabilities
- Processes all repository branches (except main/base)
- Creates PRs with standardized titles: "Merge-review: branch → merge-review"
- Handles GitHub API rate limits and error conditions
- Logs all operations for audit trail

Generated by Claude Code (Sonnet 4) for Seven of Nine Core repository management.
